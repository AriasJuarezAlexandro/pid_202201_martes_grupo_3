<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
		integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
	<!--  FontAwesome  -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.1/css/all.min.css" integrity="sha512-KfkfwYDsLkIlwQp6LFnl8zNdLGxu9YAA1QvwINks4PhcElQSvqcyVLLD9aMhXd13uQjoXtEKNosOWaZqXgel0g==" crossorigin="anonymous" referrerpolicy="no-referrer" />
<link rel="stylesheet" th:href="@{/navbar.css}">
	<title>Edificio</title>
</head>


<body>
	<!-- NAVBAR -->
	
	<nav class="navbar navbar-expand-custom navbar-mainbg">
        <a class="navbar-brand navbar-logo" th:href="@{/administrador/menu}">Inicio</a>
        <button class="navbar-toggler" type="button" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <i class="fas fa-bars text-white"></i>
        </button>
        <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav ml-auto">
                <div class="hori-selector"><div class="left"></div><div class="right"></div></div>
                <li class="nav-item active">
                    <a class="nav-link" th:href="@{edificio}"><i class="fas fa-building"></i>Edificio</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{departamento}"><i class="fas fa-house"></i>Departamento</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{propietario}"><i class="fa-solid fa-person"></i>Propietario</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{mascota}"><i class="fas fa-paw"></i>Mascota</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{ocupante}"><i class="fa-solid fa-people-roof"></i>Ocupante</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" th:href="@{visitante}"><i class="fa-solid fa-car-side"></i>Visitante</a>
                </li>
                 <li class="nav-item">
                    <a class="nav-link" th:href="@{visita}"><i class="fa-solid fa-calendar-days"></i>Visita</a>
                </li>
                <li class="nav-item"><a class="nav-link"
					th:href="@{boleta}"><i class="fa-solid fa-calendar-days"></i>Boleta</a>
				</li>
				<li class="nav-item active"><a class="nav-link"
					th:href="@{incidente}"><i class="fa-solid fa-fire"></i>Incidente</a>
				</li>
                 <li class="nav-item exit">
                   	 <a class="nav-link" href="javascript:void(0);" type="submit" th:href="@{/logout}">
                   	<i class="fa-solid fa-right-from-bracket"></i>Cerrar Sesión</a>
                </li>
            </ul>
        </div>
        
         
    </nav>
	
	<!-- NAVBAR END -->
	<!-- Formulario-->

	<div class="container-fluid">
		<button type="button" class="btn btn-primary mt-2 ml-2" data-toggle="modal"
			data-target="#edificioModal">Registrar
			Edificio</button>

		<!-- Modal Registro -->
		<div class="modal fade" id="edificioModal" tabindex="-1" role="dialog" aria-labelledby="edificioModal"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="departamentoModal">Registro de
							edificio</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<!-- Formulario -->
						<form th:action="@{/administrador/registrarEdificio}" method="post" th:object="${edificio}">
							<div class="form-group">
								<label for="exampleInputText">Nombre</label> <input type="text" class="form-control"
									id="metros" aria-describedby="metrosHelp"
									placeholder="Ingrese el nombre del edificio" th:field="*{nombre}" required minlength="4" maxlength="60" 
								pattern="[a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1]+">
							</div>
							<div class="form-group">
								<label for="exampleInputText">N Pisos</label> <input type="text" class="form-control"
									id="direccion" aria-describedby="direccionHelp"
									placeholder="Ingrese el número de pisos" th:field="*{npisos}" required minlength="1" maxlength="2" pattern="[0-9]+">
							</div>
							<div class="form-group">
								<label for="inputState">Distrito</label> <select id="inputState" class="form-control"
									th:field="*{distrito}" required>
									<option value="">[Seleccione Distrito]</option>
									<option th:each="distrito: ${distritos}" th:text="${distrito.nom_dis}"
										th:value="${distrito.id_dis}"></option>
								</select>
							</div>
							<div class="form-group">
								<label for="exampleInputText">Dirección</label> <input type="text" class="form-control"
									id="direccion" aria-describedby="dniHelp" placeholder="Ingrese la dirección"
									th:field="*{direccion}" required minlength="5" maxlength="40" 
									pattern="[\w\W]{4,40}">
							</div>
							<div class="form-group">
								<label for="exampleInputText">Fecha de Construcción</label> <input type="date"
									class="form-control" id="direccion" aria-describedby="direccionHelp"
									placeholder="Ingrese la fecha de construcción" th:field="*{fech_const}" required>
							</div>
							<button type="submit" class="btn btn-primary">Registrar</button>
						</form>
						<!-- Formulario END -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>

					</div>
				</div>
			</div>
		</div>

		<!-- Tabla  -->
		<div class="container-fluid p-2">
			<table class="table">
				<thead class="thead-dark">
					<tr>
						<th scope="col">Id</th>
						<th scope="col">Nombre</th>
						<th scope="col">N Pisos</th>
						<th scope="col">Distrito</th>
						<th scope="col">Dirección</th>
						<th scope="col">Fecha de Construcción</th>
						<th scope="col">Administrador</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="bean:${edificios}">
						<td scope="row" th:text="${bean.idEdificio}"></td>
						<td scope="row" th:text="${bean.nombre}"></td>
						<td scope="row" th:text="${bean.npisos}"></td>
						<td scope="row" th:text="${bean.distrito.id_dis}"></td>
						<td scope="row" th:text="${bean.direccion}"></td>
						<td scope="row" th:text="${bean.fech_const}"></td>
						<td scope="row" th:text="${bean.administrador.nombres + ' ' + bean.administrador.apellidos}"></td>
						<!--<td>
							<button class="btn btn-primary" data-toggle="modal"
								data-target="#modalDepartamentoEdit">
								<i class="far fa-edit"></i>Editar
							</button>

							<button th:unless="${}"
								class="btn btn-danger btn-eliminar">
								<i class="fa fa-trash"></i> <span> Eliminar </span>
							</button>

							<button th:if="${}"
								class="btn btn-success btn-activar">
								<i class="fa fa-check"></i> <span> Activar </span>
							</button>
						</td>-->
					</tr>
				</tbody>
			</table>
		</div>
	</div>


	<!-- Modal Edit -->


	<!-- Formulario-End -->

	<!-- Optional JavaScript; choose one of the two! -->

	<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
		crossorigin="anonymous"></script>

	<!-- Toast -->
	
	<script src="https://code.jquery.com/jquery-3.6.0.js"
		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

<script th:src="@{/js/navbar-js.js}"></script>

	<script th:inline="javascript" th:if="${mensaje!=null}">
		let msg;
		msg = /*[[${mensaje}]]*/null;

		toastr.success(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>

	<script th:inline="javascript" th:if="${advertencia!=null}">
		let msg;
		msg = /*[[${advertencia}]]*/null;

		toastr.warning(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>


	<script th:inline="javascript" th:if="${error!=null}">
		let msg;
		msg = /*[[${error}]]*/null;

		toastr.error(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>
</body>

</html>