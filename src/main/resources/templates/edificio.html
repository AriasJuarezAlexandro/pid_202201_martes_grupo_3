<!doctype html>
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<!-- Required meta tags -->
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css"
		integrity="sha384-zCbKRCUGaJDkqS1kPbPd7TveP5iyJE0EjAuZQTgFLD2ylzuqKfdKlfG/eSrtxUkn" crossorigin="anonymous">

	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.css">
	<title>Edificio</title>
</head>


<body>
	<nav class="navbar navbar-expand-lg navbar-dark bg-dark">
		<a class="navbar-brand" href="#">Inicio</a>

		<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav"
			aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
			<span class="navbar-toggler-icon"></span>
		</button>

		<div class="collapse navbar-collapse" id="navbarNav">
			<ul class="navbar-nav">
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/edificio}">Edificio</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/departamento}">Departamento</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/propietario}">Propietario</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/mascota}">Mascotas</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/ocupante}">Ocupantes</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/visita}">Visita</a></li>
				<li class="nav-item"><a class="nav-link" th:href="@{/administrador/visitante}">Visitante</a></li>
			</ul>


		</div>

		<div class="form-inline my-2 my-lg-0">
			<div class="border rounded p-1 px-2 mr-2">
				<i class="fas fa-user text-white text-center"></i> <span th:text="${session.user.nombres}"
					class="text-white bg-dark mx-2"></span>
			</div>

			<a class="btn btn-outline-danger my-2 my-sm-0" type="submit" th:href="@{/logout}">Cerrar Sesion</a>
		</div>
	</nav>

	<!-- Formulario-->

	<div class="container-fluid">
		<button type="button" class="btn btn-primary mt-2 ml-2" data-toggle="modal"
			data-target="#edificioModal">Registrar
			Edificio</button>

		<!-- Modal Registro -->
		<div class="modal fade" id="edificioModal" tabindex="-1" role="dialog" aria-labelledby="edificioModal"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title" id="departamentoModal">Registro de
							edificio</h5>
						<button type="button" class="close" data-dismiss="modal" aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<!-- Formulario -->
						<form th:action="@{/administrador/registrarEdificio}" method="post" th:object="${edificio}">
							<div class="form-group">
								<label for="exampleInputText">Nombre</label> <input type="text" class="form-control"
									id="metros" aria-describedby="metrosHelp"
									placeholder="Ingrese los nombres del edificio]" th:field="*{nombre}" required minlength="4" maxlength="60" 
								pattern="[a-zA-ZÀ-ÿ\u00f1\u00d1]+(\s*[a-zA-ZÀ-ÿ\u00f1\u00d1]*)*[a-zA-ZÀ-ÿ\u00f1\u00d1]+">
							</div>
							<div class="form-group">
								<label for="exampleInputText">N Pisos</label> <input type="text" class="form-control"
									id="direccion" aria-describedby="direccionHelp"
									placeholder="Ingrese el numero de pisos" th:field="*{npisos}" required minlength="1" maxlength="2" pattern="[0-9]+">
							</div>
							<div class="form-group">
								<label for="inputState">Distrito</label> <select id="inputState" class="form-control"
									th:field="*{distrito}" required>
									<option value="">[Seleccione Distrito]</option>
									<option th:each="distrito: ${distritos}" th:text="${distrito.nom_dis}"
										th:value="${distrito.id_dis}"></option>
								</select>
							</div>
							<div class="form-group">
								<label for="exampleInputText">Direccion</label> <input type="text" class="form-control"
									id="direccion" aria-describedby="dniHelp" placeholder="Ingrese la direccion"
									th:field="*{direccion}" required minlength="5" maxlength="40" 
									pattern="[\w\W]{4,40}">
							</div>
							<div class="form-group">
								<label for="exampleInputText">Fecha de Construccion</label> <input type="date"
									class="form-control" id="direccion" aria-describedby="direccionHelp"
									placeholder="Ingrese la fecha de construccion" th:field="*{fech_const}" required>
							</div>
							<button type="submit" class="btn btn-primary">Registrar</button>
						</form>
						<!-- Formulario END -->
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>

					</div>
				</div>
			</div>
		</div>

		<!-- Tabla  -->
		<div class="container-fluid p-2">
			<table class="table">
				<thead class="thead-dark">
					<tr>
						<th scope="col">Id</th>
						<th scope="col">Nombre</th>
						<th scope="col">N Pisos</th>
						<th scope="col">Distrito</th>
						<th scope="col">Direccion</th>
						<th scope="col">Fecha de Construccion</th>
						<th scope="col">Administrador</th>
					</tr>
				</thead>
				<tbody>
					<tr th:each="bean:${edificios}">
						<td scope="row" th:text="${bean.idEdificio}"></td>
						<td scope="row" th:text="${bean.nombre}"></td>
						<td scope="row" th:text="${bean.npisos}"></td>
						<td scope="row" th:text="${bean.distrito.id_dis}"></td>
						<td scope="row" th:text="${bean.direccion}"></td>
						<td scope="row" th:text="${bean.fech_const}"></td>
						<td scope="row" th:text="${bean.administrador.nombres + ' ' + bean.administrador.apellidos}"></td>
						<!--<td>
							<button class="btn btn-primary" data-toggle="modal"
								data-target="#modalDepartamentoEdit">
								<i class="far fa-edit"></i>Editar
							</button>

							<button th:unless="${}"
								class="btn btn-danger btn-eliminar">
								<i class="fa fa-trash"></i> <span> Eliminar </span>
							</button>

							<button th:if="${}"
								class="btn btn-success btn-activar">
								<i class="fa fa-check"></i> <span> Activar </span>
							</button>
						</td>-->
					</tr>
				</tbody>
			</table>
		</div>
	</div>


	<!-- Modal Edit -->


	<!-- Formulario-End -->

	<!-- Optional JavaScript; choose one of the two! -->

	<!-- Option 1: jQuery and Bootstrap Bundle (includes Popper) -->
	<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.slim.min.js"
		integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
		crossorigin="anonymous"></script>
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-fQybjgWLrvvRgtW6bFlB7jaZrFsaBXjsOMm/tB9LTS58ONXgqbR9W8oWht/amnpF"
		crossorigin="anonymous"></script>

	<!-- Toast -->
	
	<script src="https://code.jquery.com/jquery-3.6.0.js"
		integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/toastr.js/latest/toastr.min.js"></script>

	<script th:inline="javascript" th:if="${mensaje!=null}">
		let msg;
		msg = /*[[${mensaje}]]*/null;

		toastr.success(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>

	<script th:inline="javascript" th:if="${advertencia!=null}">
		let msg;
		msg = /*[[${advertencia}]]*/null;

		toastr.warning(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>


	<script th:inline="javascript" th:if="${error!=null}">
		let msg;
		msg = /*[[${error}]]*/null;

		toastr.error(msg, toastr.options = {
			"closeButton": true,
			"debug": false,
			"newestOnTop": false,
			"progressBar": true,
			"positionClass": "toast-top-right",
			"preventDuplicates": true,
			"onclick": null,
			"showDuration": "100",
			"hideDuration": "500",
			"timeOut": "3500",
			"extendedTimeOut": "1000",
			"showEasing": "swing",
			"hideEasing": "linear",
			"showMethod": "fadeIn",
			"hideMethod": "fadeOut"
		});
	</script>
</body>

</html>